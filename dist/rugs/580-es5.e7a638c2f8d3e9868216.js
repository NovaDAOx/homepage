!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=r(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}}).apply(this,arguments)}function r(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkrugs=self.webpackChunkrugs||[]).push([[580],{34580:function(r,c,s){"use strict";s.r(c),s.d(c,{PhantomAdapter:function(){return m}});var l=s(16304),f=s(5587),p=s(77702),d=s(10968);function h(e,t,n){return new Promise(function(r,o){n>0?setTimeout((0,l.Z)(regeneratorRuntime.mark(function a(){var c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e();case 2:(c=a.sent)&&r(c),c||h(e,t,n-1).then(function(e){return r(e),e}).catch(function(e){return o(e)});case 4:case"end":return a.stop()}},a)})),t):r(!1)})}var v,w=(v=(0,l.Z)(regeneratorRuntime.mark(function e(){var t,n,r,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>0&&void 0!==o[0]?o[0]:{interval:1e3,count:3},"undefined"==typeof window||null===(t=window.solana)||void 0===t||!t.isPhantom){e.next=4;break}return e.abrupt("return",window.solana);case 4:return e.next=6,h(function(){var e;return null===(e=window.solana)||void 0===e?void 0:e.isPhantom},n.interval,n.count);case 6:return r=e.sent,e.abrupt("return",r?window.solana:null);case 8:case"end":return e.stop()}},e)})),function(){return v.apply(this,arguments)}),m=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(m,r);var c,s,h,v=a(m);function m(){var t;e(this,m);var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=v.call(this),(0,f.Z)(i(t),"name",p.rW.PHANTOM),(0,f.Z)(i(t),"adapterNamespace",p.yk.SOLANA),(0,f.Z)(i(t),"currentChainNamespace",p.EN.SOLANA),(0,f.Z)(i(t),"type",p.hN.EXTERNAL),(0,f.Z)(i(t),"status",p.MP.NOT_READY),(0,f.Z)(i(t),"_wallet",null),(0,f.Z)(i(t),"phantomProvider",null),(0,f.Z)(i(t),"rehydrated",!1),(0,f.Z)(i(t),"_onDisconnect",function(){t._wallet&&(t._wallet.off("disconnect",t._onDisconnect),t.rehydrated=!1,t.status=t.status===p.MP.CONNECTED?p.MP.READY:p.MP.NOT_READY,t.emit(p.n2.DISCONNECTED))}),t.chainConfig=n.chainConfig||null,t}return c=m,(s=[{key:"isWalletConnected",get:function(){var e;return!(null===(e=this._wallet)||void 0===e||!e.isConnected||this.status!==p.MP.CONNECTED)}},{key:"provider",get:function(){var e;return(null===(e=this.phantomProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error("Not implemented")}},{key:"setAdapterSettings",value:function(e){}},{key:"init",value:function(e){var t=this,r=this;return(0,l.Z)(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n(u(m.prototype),"checkInitializationRequirements",t).call(r),r.chainConfig||(r.chainConfig=(0,p.h2)(p.EN.SOLANA,"0x1")),o.next=4,w({interval:500,count:3});case 4:if(r._wallet=o.sent,r._wallet){o.next=7;break}throw p.Ty.notInstalled();case 7:if(r.phantomProvider=new d.PhantomInjectedProvider({config:{chainConfig:r.chainConfig}}),r.status=p.MP.READY,r.emit(p.n2.READY,p.rW.PHANTOM),o.prev=8,p.cM.debug("initializing phantom adapter"),o.t0=e.autoConnect,!o.t0){o.next=15;break}return r.rehydrated=!0,o.next=15,r.connect();case 15:o.next=20;break;case 17:o.prev=17,o.t1=o.catch(8),p.cM.error("Failed to connect with cached phantom provider",o.t1),r.emit("ERRORED",o.t1);case 20:case"end":return o.stop()}},o,null,[[8,17]])}))()}},{key:"connect",value:function(){var e=this,t=this;return(0,l.Z)(regeneratorRuntime.mark(function r(){var o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t,r.prev=1,n(u(m.prototype),"checkConnectionRequirements",e).call(t),t.status=p.MP.CONNECTING,t.emit(p.n2.CONNECTING,{adapter:p.rW.PHANTOM}),t._wallet){r.next=4;break}throw p.Ty.notInstalled();case 4:if(!t._wallet.isConnected){r.next=9;break}return r.next=7,t.connectWithProvider(t._wallet);case 7:r.next=23;break;case 9:return a=t._wallet._handleDisconnect,r.prev=10,r.next=13,new Promise(function(e,n){var r,c=(r=(0,l.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.connectWithProvider(t._wallet);case 2:e(t.provider);case 3:case"end":return n.stop()}},n)})),function(){return r.apply(this,arguments)});if(!t._wallet)return n(p.Ty.notInstalled());t._wallet.once("connect",c),t._wallet._handleDisconnect=function(){n(p.Ty.windowClosed());for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.apply(o._wallet,t)},t._wallet.connect().catch(function(e){n(e)})});case 13:r.next=20;break;case 15:if(r.prev=15,r.t0=r.catch(10),!(r.t0 instanceof p.up)){r.next=19;break}throw r.t0;case 19:throw p.RM.connectionError(null==r.t0?void 0:r.t0.message);case 20:return r.prev=20,t._wallet._handleDisconnect=a,r.finish(20);case 23:if(t._wallet.publicKey){r.next=25;break}throw p.RM.connectionError();case 25:return r.abrupt("return",(t._wallet.on("disconnect",t._onDisconnect),t.provider));case 28:throw r.prev=28,r.t1=r.catch(1),t.status=p.MP.READY,t.rehydrated=!1,t.emit(p.n2.ERRORED,r.t1),r.t1;case 31:case"end":return r.stop()}},r,null,[[1,28],[10,15,20,23]])}))()}},{key:"disconnect",value:function(){var e=arguments,t=this;return(0,l.Z)(regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:{cleanup:!1},t.isWalletConnected){n.next=3;break}throw p.RM.notConnectedError("Not connected with wallet");case 3:return n.prev=3,n.next=6,null===(o=t._wallet)||void 0===o?void 0:o.disconnect();case 6:r.cleanup&&(t.status=p.MP.NOT_READY,t.phantomProvider=null,t._wallet=null),t.emit(p.n2.DISCONNECTED),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),t.emit(p.n2.ERRORED,p.RM.disconnectionError(null==n.t0?void 0:n.t0.message));case 13:case"end":return n.stop()}},n,null,[[3,10]])}))()}},{key:"getUserInfo",value:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isWalletConnected){t.next=2;break}throw p.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return t.abrupt("return",{});case 3:case"end":return t.stop()}},t)}))()}},{key:"connectWithProvider",value:function(e){var t=this;return(0,l.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.phantomProvider){n.next=2;break}throw p.RM.connectionError("No phantom provider");case 2:return n.next=4,t.phantomProvider.setupProvider(e);case 4:return t.status=p.MP.CONNECTED,t.emit(p.n2.CONNECTED,{adapter:p.rW.PHANTOM,reconnected:t.rehydrated}),n.abrupt("return",t.provider);case 7:case"end":return n.stop()}},n)}))()}}])&&t(c.prototype,s),h&&t(c,h),m}(p.J5)}}])}();
!function(){function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(P){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return N()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=u;var f={};function p(){}function d(){}function h(){}var v={};s(v,i,function(){return this});var y=Object.getPrototypeOf,w=y&&y(y(C([])));w&&w!==n&&r.call(w,i)&&(v=w);var g=h.prototype=p.prototype=Object.create(v);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function n(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,c)},function(t){n("throw",t,a,c)}):e.resolve(f).then(function(t){u.value=t,a(u)},function(t){return n("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}}function E(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return d.prototype=h,s(g,"constructor",h),s(h,"constructor",d),d.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(g),s(g,c,"Generator"),s(g,i,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function e(){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=n(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function n(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(self.webpackChunkrugs=self.webpackChunkrugs||[]).push([[310],{43310:function(n,r,c){"use strict";c.r(r),c.d(r,{WalletConnectV1Adapter:function(){return E}});var u=c(21611),p=c(5587),d=c(99363),h=c(24180),v=function(t){a(n,t);var e=s(n);function n(t,r){return i(this,n),e.call(this,{cryptoLib:h,connectorOpts:t,pushServerOpts:r})}return o(n)}(d.Z),y=c(981),w=c(80956),g=c(50520),m=[{name:"Rainbow",chains:[y.EN.EIP155],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}},{name:"MetaMask",chains:[y.EN.EIP155],logo:"https://images.web3auth.io/login-metamask.svg",mobile:{native:"metamask:",universal:"https://metamask.app.link"},desktop:{native:"",universal:""}}];function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var E=function(n){a(c,n);var r=s(c);function c(){var t;i(this,c);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=r.call(this),(0,p.Z)(l(t),"name",y.rW.WALLET_CONNECT_V1),(0,p.Z)(l(t),"adapterNamespace",y.yk.EIP155),(0,p.Z)(l(t),"currentChainNamespace",y.EN.EIP155),(0,p.Z)(l(t),"type",y.hN.EXTERNAL),(0,p.Z)(l(t),"adapterOptions",void 0),(0,p.Z)(l(t),"status",y.MP.NOT_READY),(0,p.Z)(l(t),"adapterData",{uri:"",extensionAdapters:m}),(0,p.Z)(l(t),"connector",null),(0,p.Z)(l(t),"wcProvider",null),(0,p.Z)(l(t),"rehydrated",!1),t.adapterOptions=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach(function(e){(0,p.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e),t.chainConfig=e.chainConfig||null,t.sessionTime=e.sessionTime||86400,t}return o(c,[{key:"connected",get:function(){var t;return!(null===(t=this.connector)||void 0===t||!t.connected)}},{key:"provider",get:function(){var t;return(null===(t=this.wcProvider)||void 0===t?void 0:t.provider)||null},set:function(t){throw new Error("Not implemented")}},{key:"init",value:function(){var n=this,r=this;return(0,u.Z)(t().mark(function o(){return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e(f(c.prototype),"checkInitializationRequirements",n).call(r),r.chainConfig||(r.chainConfig=(0,y.h2)(y.EN.EIP155,1)),r.connector=r.getWalletConnectInstance(),r.wcProvider=new g.WalletConnectProvider({config:{chainConfig:r.chainConfig},connector:r.connector}),r.emit(y.n2.READY,y.rW.WALLET_CONNECT_V1),r.status=y.MP.READY,y.cM.debug("initializing wallet connect v1 adapter"),t.t0=r.connector.connected,!t.t0){t.next=12;break}return r.rehydrated=!0,t.next=12,r.onConnectHandler({accounts:r.connector.accounts,chainId:r.connector.chainId});case 12:case"end":return t.stop()}},o)}))()}},{key:"connect",value:function(){var n=this,r=this;return(0,u.Z)(t().mark(function o(){var i,a;return t().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e(f(c.prototype),"checkConnectionRequirements",n).call(r),r.connector){o.next=2;break}throw y.Ty.notReady("Wallet adapter is not ready yet");case 2:if(!r.connected){o.next=8;break}return o.next=5,r.onConnectHandler({accounts:r.connector.accounts,chainId:r.connector.chainId});case 5:o.t0=r.provider,o.next=16;break;case 8:if(o.t1=r.status!==y.MP.CONNECTING,!o.t1){o.next=15;break}return null!==(i=r.adapterOptions.adapterSettings)&&void 0!==i&&i.qrcodeModal&&(r.connector=r.getWalletConnectInstance(),r.wcProvider=new g.WalletConnectProvider({config:{chainConfig:r.chainConfig,skipLookupNetwork:null===(a=r.adapterOptions.adapterSettings)||void 0===a?void 0:a.skipNetworkSwitching},connector:r.connector})),o.next=13,r.createNewSession();case 13:r.status=y.MP.CONNECTING,r.emit(y.n2.CONNECTING,{adapter:y.rW.WALLET_CONNECT_V1});case 15:o.t0=new Promise(function(e,n){if(!r.connector)return n(y.Ty.notReady("Wallet adapter is not ready yet"));r.connector.on("modal_closed",(0,u.Z)(t().mark(function e(){return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(r.status=y.MP.READY,r.emit(y.n2.READY,y.rW.WALLET_CONNECT_V1),n(new Error("User closed modal"))));case 1:case"end":return t.stop()}},e)})));try{r.connector.on("connect",(o=(0,u.Z)(t().mark(function n(o,i){return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o&&r.emit(y.n2.ERRORED,o),y.cM.debug("connected event emitted by web3auth"),t.next=4,r.onConnectHandler(i.params[0]);case 4:return t.abrupt("return",e(r.provider));case 5:case"end":return t.stop()}},n)})),function(t,e){return o.apply(this,arguments)}))}catch(i){y.cM.error("Wallet connect v1 adapter error while connecting",i),r.status=y.MP.READY,r.rehydrated=!0,r.emit(y.n2.ERRORED,i),n(i instanceof y.up?i:y.RM.connectionError("Failed to login with wallet connect: ".concat((null==i?void 0:i.message)||"")))}var o});case 16:return o.abrupt("return",o.t0);case 17:case"end":return o.stop()}},o)}))()}},{key:"setAdapterSettings",value:function(t){this.status!==y.MP.READY&&null!=t&&t.sessionTime&&(this.sessionTime=t.sessionTime)}},{key:"getUserInfo",value:function(){var e=this;return(0,u.Z)(t().mark(function n(){return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.connected){t.next=2;break}throw y.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return t.abrupt("return",{});case 3:case"end":return t.stop()}},n)}))()}},{key:"disconnect",value:function(){var n=this,r=arguments,o=function(){return e(f(c.prototype),"disconnect",n)},i=this;return(0,u.Z)(t().mark(function e(){var n,a;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>0&&void 0!==r[0]?r[0]:{cleanup:!1},a=n.cleanup,i.connector&&i.connected){t.next=4;break}throw y.RM.notConnectedError("Not connected with wallet");case 4:return t.next=6,o().call(i);case 6:return t.next=8,i.connector.killSession();case 8:i.rehydrated=!1,a?(i.connector=null,i.status=y.MP.NOT_READY,i.wcProvider=null):i.status=y.MP.READY,i.emit(y.n2.DISCONNECTED);case 11:case"end":return t.stop()}},e)}))()}},{key:"addChain",value:function(e){var n=this;return(0,u.Z)(t().mark(function r(){var o,i;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.wcProvider){t.next=3;break}throw y.Ty.notReady("Wallet adapter is not ready yet");case 3:if(i=null===(o=n.adapterOptions.adapterSettings)||void 0===o?void 0:o.networkSwitchModal,t.t0=i,!t.t0){t.next=8;break}return t.next=8,i.addNetwork({chainConfig:e,appOrigin:window.location.hostname});case 8:return t.next=10,n.wcProvider.addChain(e);case 10:t.next=15;break;case 12:t.prev=12,t.t1=t.catch(0),y.cM.error(t.t1);case 15:case"end":return t.stop()}},r,null,[[0,12]])}))()}},{key:"switchChain",value:function(e,n){var r=this;return(0,u.Z)(t().mark(function o(){var i,a;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.wcProvider){t.next=2;break}throw y.Ty.notReady("Wallet adapter is not ready yet");case 2:if(a=null===(i=r.adapterOptions.adapterSettings)||void 0===i?void 0:i.networkSwitchModal,t.t0=a,!t.t0){t.next=7;break}return t.next=7,a.switchNetwork({currentChainConfig:n,newChainConfig:e,appOrigin:window.location.hostname});case 7:return t.next=9,r.wcProvider.switchChain({chainId:n.chainId,lookup:!1,addChain:!1});case 9:case"end":return t.stop()}},o)}))()}},{key:"createNewSession",value:function(){var e=arguments,n=this;return(0,u.Z)(t().mark(function r(){var o,i,a,c;return t().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:{forceNewSession:!1},n.connector){r.next=3;break}throw y.Ty.notReady("Wallet adapter is not ready yet");case 3:if(r.t0=a.forceNewSession&&n.connector.pending,!r.t0){r.next=7;break}return r.next=7,n.connector.killSession();case 7:if(null!==(o=n.adapterOptions)&&void 0!==o&&null!==(i=o.adapterSettings)&&void 0!==i&&i.qrcodeModal){r.next=9;break}return r.abrupt("return",new Promise(function(e,r){var o,i;if(!n.connector)return r(y.Ty.notReady("Wallet adapter is not ready yet"));y.cM.debug("creating new session for web3auth wallet connect"),n.connector.on("display_uri",(i=(0,u.Z)(t().mark(function o(i,a){var c;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i?(n.emit(y.n2.ERRORED,y.RM.connectionError("Failed to display wallet connect qr code")),r(i)):(n.updateAdapterData({uri:a.params[0],extensionAdapters:m}),null===(c=n.connector)||void 0===c||c.off("display_uri"),e()));case 1:case"end":return t.stop()}},o)})),function(t,e){return i.apply(this,arguments)})),n.connector.createSession({chainId:parseInt((null===(o=n.chainConfig)||void 0===o?void 0:o.chainId)||"0x1",16)}).catch(function(t){return y.cM.error("error while creating new wallet connect session",t),n.emit(y.n2.ERRORED,t),r(t)})}));case 9:return r.next=11,n.connector.createSession({chainId:parseInt((null===(c=n.chainConfig)||void 0===c?void 0:c.chainId)||"0x1",16)});case 11:case"end":return r.stop()}},r)}))()}},{key:"onConnectHandler",value:function(e){var n=this;return(0,u.Z)(t().mark(function r(){var o,i,a,c,s,u;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.connector&&n.wcProvider){t.next=2;break}throw y.Ty.notReady("Wallet adapter is not ready yet");case 2:if(n.chainConfig){t.next=4;break}throw y.Ty.invalidParams("Chain config is not set");case 4:if(o=e.chainId,y.cM.debug("connected chainId in hex"),o===parseInt(n.chainConfig.chainId,16)){t.next=24;break}if(s=(0,y.h2)(y.EN.EIP155,o)||{chainId:"0x".concat(o.toString(16)),displayName:"Unknown Network"},(u=null===(i=n.adapterOptions.adapterSettings)||void 0===i?void 0:i.qrcodeModal)&&(!u||null!==(a=n.adapterOptions)&&void 0!==a&&null!==(c=a.adapterSettings)&&void 0!==c&&c.skipNetworkSwitching)){t.next=24;break}return t.prev=8,t.next=11,n.addChain(n.chainConfig);case 11:return t.next=13,n.switchChain(s,n.chainConfig);case 13:n.connector=n.getWalletConnectInstance(),t.next=24;break;case 16:return t.prev=16,t.t0=t.catch(8),y.cM.error("error while chain switching",t.t0),t.next=21,n.createNewSession({forceNewSession:!0});case 21:return n.emit(y.n2.ERRORED,y.Ty.fromCode(5e3,"Not connected to correct network. Expected: ".concat(n.chainConfig.displayName,", Current: ").concat((null==s?void 0:s.displayName)||o,", Please switch to correct network from wallet"))),n.status=y.MP.READY,t.abrupt("return",void(n.rehydrated=!0));case 24:return t.next=26,n.wcProvider.setupProvider(n.connector);case 26:n.subscribeEvents(n.connector),n.status=y.MP.CONNECTED,n.emit(y.n2.CONNECTED,{adapter:y.rW.WALLET_CONNECT_V1,reconnected:n.rehydrated});case 29:case"end":return t.stop()}},r,null,[[8,16]])}))()}},{key:"subscribeEvents",value:function(e){var n,r=this;e.on("session_update",(n=(0,u.Z)(t().mark(function e(n){return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n&&r.emit(y.n2.ERRORED,n);case 1:case"end":return t.stop()}},e)})),function(t){return n.apply(this,arguments)}))}},{key:"getWalletConnectInstance",value:function(){var t=this.adapterOptions.adapterSettings||{};return t.bridge=t.bridge||"https://bridge.walletconnect.org",new v(t)}}]),c}(w.d)}}])}();
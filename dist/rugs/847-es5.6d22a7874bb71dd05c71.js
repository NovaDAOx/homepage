!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var a=n(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}function i(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkrugs=self.webpackChunkrugs||[]).push([[847],{43847:function(n,i,s){"use strict";s.r(i),s.d(i,{MetamaskAdapter:function(){return m}});var f=s(16304),l=s(5587),h=s(83917),p=s.n(h),d=s(77702),m=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(v,n);var i,s,h,m=o(v);function v(){var t;e(this,v);var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=m.call(this),(0,l.Z)(c(t),"adapterNamespace",d.yk.EIP155),(0,l.Z)(c(t),"currentChainNamespace",d.EN.EIP155),(0,l.Z)(c(t),"type",d.hN.EXTERNAL),(0,l.Z)(c(t),"name",d.rW.METAMASK),(0,l.Z)(c(t),"status",d.MP.NOT_READY),(0,l.Z)(c(t),"rehydrated",!1),(0,l.Z)(c(t),"metamaskProvider",null),t.chainConfig=r.chainConfig||null,t}return i=v,(s=[{key:"provider",get:function(){return this.status===d.MP.CONNECTED&&this.metamaskProvider?this.metamaskProvider:null},set:function(e){throw new Error("Not implemented")}},{key:"init",value:function(e){var t=this,n=this;return(0,f.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r(u(v.prototype),"checkInitializationRequirements",t).call(n),a.next=3,p()({mustBeMetaMask:!0});case 3:if(n.metamaskProvider=a.sent,n.metamaskProvider){a.next=6;break}throw d.Ty.notInstalled("Metamask extension is not installed");case 6:if(n.status=d.MP.READY,n.emit(d.n2.READY,d.rW.METAMASK),a.prev=7,d.cM.debug("initializing metamask adapter"),a.t0=e.autoConnect,!a.t0){a.next=14;break}return n.rehydrated=!0,a.next=14,n.connect();case 14:a.next=19;break;case 16:a.prev=16,a.t1=a.catch(7),n.emit(d.n2.ERRORED,a.t1);case 19:case"end":return a.stop()}},a,null,[[7,16]])}))()}},{key:"setAdapterSettings",value:function(e){}},{key:"connect",value:function(){var e=this,t=this;return(0,f.Z)(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r(u(v.prototype),"checkConnectionRequirements",e).call(t),t.chainConfig||(t.chainConfig=(0,d.h2)(d.EN.EIP155,1)),t.status=d.MP.CONNECTING,t.emit(d.n2.CONNECTING,{adapter:d.rW.METAMASK}),t.metamaskProvider){n.next=2;break}throw d.RM.notConnectedError("Not able to connect with metamask");case 2:return n.prev=2,n.next=5,t.metamaskProvider.request({method:"eth_requestAccounts"});case 5:if(a=t.metamaskProvider.chainId,n.t0=a!==t.chainConfig.chainId,!n.t0){n.next=10;break}return n.next=10,t.switchChain(t.chainConfig);case 10:if(t.status=d.MP.CONNECTED,t.provider){n.next=13;break}throw d.RM.notConnectedError("Failed to connect with provider");case 13:return n.abrupt("return",(t.provider.once("disconnect",function(){t.disconnect()}),t.emit(d.n2.CONNECTED,{adapter:d.rW.METAMASK,reconnected:t.rehydrated}),t.provider));case 16:throw n.prev=16,n.t1=n.catch(2),t.status=d.MP.READY,t.rehydrated=!1,t.emit(d.n2.ERRORED,n.t1),d.RM.connectionError("Failed to login with metamask wallet");case 19:case"end":return n.stop()}},n,null,[[2,16]])}))()}},{key:"disconnect",value:function(){var e=arguments,t=this;return(0,f.Z)(regeneratorRuntime.mark(function r(){var n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:{cleanup:!1},t.status===d.MP.CONNECTED){r.next=3;break}throw d.RM.disconnectionError("Not connected with wallet");case 3:null===(n=t.provider)||void 0===n||n.removeAllListeners(),a.cleanup?(t.status=d.MP.NOT_READY,t.metamaskProvider=null):t.status=d.MP.READY,t.rehydrated=!1,t.emit(d.n2.DISCONNECTED);case 4:case"end":return r.stop()}},r)}))()}},{key:"getUserInfo",value:function(){var e=this;return(0,f.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.status===d.MP.CONNECTED){t.next=2;break}throw d.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return t.abrupt("return",{});case 3:case"end":return t.stop()}},t)}))()}},{key:"switchChain",value:function(e){var t=this;return(0,f.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.metamaskProvider){r.next=2;break}throw d.RM.notConnectedError("Not connected with wallet");case 2:return r.prev=2,r.next=5,t.metamaskProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]});case 5:r.next=13;break;case 7:if(r.prev=7,r.t0=r.catch(2),4902===r.t0.code){r.next=11;break}throw r.t0;case 11:return r.next=13,t.metamaskProvider.request({method:"wallet_addEthereumChain",params:[{chainId:e.chainId,chainName:e.displayName,rpcUrls:[e.rpcTarget]}]});case 13:case"end":return r.stop()}},r,null,[[2,7]])}))()}}])&&t(i.prototype,s),h&&t(i,h),v}(d.J5)}}])}();
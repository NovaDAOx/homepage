<app-menu-bar class="menu-bar"></app-menu-bar>
<div class="stream">
  <!-- Start HTML Reel -->

  <div id="connectButton">
    <!-- blank on page start, button injected by js -->
  </div>
  <div class="thirds">
    <div class="full">
      <div class="Scontainer">
        <br />
        <div class="heading">$NOVA Rewards</div>
        <br />
        <div class="value" id="rewards">Unavailable</div>
        <br /><br />

        <div class="btn_center" id="claimDiv">
          <button
          class="new_strokedbtn"
          (click)="refreshData()"
          *ngIf="STAKEbtn || unstakingbtnControl"
        >
          <img
            class="claim_refresh"
            src="../../../assets/images/icons8-refresh-64.png"
            alt=""
          />
        </button>
          <button
            class="new_strokedbtn"
            *ngIf="STAKEbtn || unstakingbtnControl"
            id="claimBTN"
            (click)="claim()"
          >
            Claim
          </button>
        </div>
        <br /><br />
      </div>
    </div>
    <div class="full">
      <div class="Scontainer">
        <br />
        <div class="heading">Current Staked</div>
        <br />
        <div class="value" id="staked">Unavailable</div>
        <br />
        <div class="btn_center">
          <button
            class="new_strokedbtn"
            (click)="unstakingPAGE()"
            *ngIf="unstakingbtnControl"
            id="unstakingpageBtn"
          >
            UNSTAKING PAGE
          </button>
          <button
            class="new_strokedbtn dis"
            (click)="stakingPAGE()"
            id="stakingpageBtn"
          >
            STAKING PAGE
          </button>
        </div>
        <br /><br />
      </div>
    </div>
  </div>

  <div class="twothirds" id="stakingPage">
    <div class="Scontainer container_no_background">
      <div class="stakingsection container_no_background" *ngIf="approvebtn">
        <button
          mat-flat-button
          class="newconnect_btn wid1 new_strokedbtn"
          (click)="show()"
          (click)="interact()"
          *ngIf="!loading3"
        >
          Allow Nova to Stake NFTs
        </button>
        <button
          mat-flat-button
          class="newconnect_btn wid1 btn_x"
          (click)="show()"
          (click)="interact()"
          *ngIf="loading3"
        >
          Approval in progress
        </button>

        <button class="infobtn">i</button>

        <span class="infotxt"
          ><br />Staking NFTs requires two steps <br />
          1. Approve Nova to interact with your NFTs <br />
          2. Select the NFTs you wish to stake and run the Stake command.<br />
          Allowing Nova to interact with your NFTs is key as it also allows us
          to unstake your NFTs and issue your rewards.</span
        >
      </div>

      <br />

      <div class="stakingsection grayone" id="stakingsection">
        <div *ngIf="!isConnected">
          <button
            mat-flat-button
            class="newconnect_btn wid1 btn_x"
            *ngIf="!isConnected"
            (click)="showMetamaskContent()"
          >
            Log in to Metamask to Stake
          </button>
        </div>

        <div class="" *ngIf="loading1">
          <div class="newconnect_btn wid1 high1 btn_x">
            Checking wallet... <br /><br />
            <div class="lds-ring">
              <div></div>
              <div></div>
              <div></div>
              <div></div>
            </div>
          </div>
        </div>

        <div class="stakingLoading" *ngIf="NFTtoadx">
          No stakable NFTs found. Procure a valid NFT or contact support on Discord.
        </div>

        <button class="new_strokedbtn" (click)="stake()" *ngIf="STAKEbtn">
          STAKE
        </button>

        <button
          class="new_strokedbtn"
          *ngIf="STAKEbtn"
          (click)="select_all()"
          (click)="tokenID()"
        >
          Select All
        </button>

        <button
          class="new_strokedbtn"
          *ngIf="Deselectbtn"
          (click)="deselect_all()"
        >
          Deselect All
        </button>

        <app-nfts [nft]="list" [callbackFunction]="stakeCallbackFunction" class="nft_info"></app-nfts>

      </div>
    </div>
  </div>
  <div class="twothirds unstakingpage" id="unstakingPage">
    <div class="Scontainer container_no_background">
      <div class="stakingsection container_no_background">
        <div class="stakingsection grayone">
          <div class="" *ngIf="loading1">
            <div class="newconnect_btn wid1 high1 btn_x">
              Checking wallet status. <br />Please wait... <br /><br />
              <div class="lds-ring">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
              </div>
            </div>
          </div>

          <button
            class="new_strokedbtn"
            (click)="unstakeAll()"
            *ngIf="UnSTAKEbtn"
          >
            UNSTAKEALL
          </button>
          <button
            class="new_strokedbtn"
            (click)="unstake()"
            *ngIf="unstakebtn2"
          >
            UNSTAKE SELECTED
          </button>

          <button
            class="new_strokedbtn"
            *ngIf="Deselectbtn"
            (click)="deselect_all()"
          >
            Deselect All
          </button>

          <app-staked-nfts
            [STAKEDnft]="StakedNFTs"
            [callbackFunction]="myCallbackFunction"
            class="nft_info"
          ></app-staked-nfts>
        </div>
      </div>
    </div>

    <!-- End HTML Reel -->
  </div>
</div>

<ngx-spinner
  className="spinner"
  bdColor="rgba(0,0,0.8) !important"
  size="large"
  color="grey"
  backgroundColor="rgba(0,0,100,1)"
  backgroundSize="200%"
  type="square-jelly-box"
  [fullScreen]="true"
>
  <h1 style="color: white">Please check wallet --OR-- Transaction in progress...</h1>
</ngx-spinner>
